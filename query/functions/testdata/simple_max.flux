from(bucket:"test")
  |> range(start:2018-04-17T00:00:00Z)
  |> group(by: ["_measurement", "_start"])
  |> max(column: "_value")
  |> map(fn: (r) => {_time: r._time,max:r._value})
  |> yield(name:"0")
